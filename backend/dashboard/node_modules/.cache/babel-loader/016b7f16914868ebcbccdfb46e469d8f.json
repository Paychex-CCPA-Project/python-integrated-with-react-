{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { Component, Children, cloneElement } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual } from 'recompose';\nimport Dropzone from 'react-dropzone';\nimport compose from 'recompose/compose';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport classnames from 'classnames';\nimport { addField, translate } from 'ra-core';\nimport Labeled from './Labeled';\nimport FileInputPreview from './FileInputPreview';\nimport sanitizeRestProps from './sanitizeRestProps';\n\nvar styles = function styles(theme) {\n  return createStyles({\n    dropZone: {\n      background: theme.palette.background.default,\n      cursor: 'pointer',\n      padding: '1rem',\n      textAlign: 'center',\n      color: theme.palette.text.hint\n    },\n    preview: {},\n    removeButton: {},\n    root: {\n      width: '100%'\n    }\n  });\n};\n\nvar FileInput =\n/** @class */\nfunction (_super) {\n  __extends(FileInput, _super);\n\n  function FileInput(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.onDrop = function (files) {\n      var updatedFiles = _this.props.multiple ? _this.state.files.concat(files.map(_this.transformFile)) : files.map(_this.transformFile).slice();\n\n      _this.setState({\n        files: updatedFiles\n      });\n\n      if (_this.props.multiple) {\n        // Use onBlur to ensure redux-form set the input as touched\n        _this.props.input.onBlur(updatedFiles);\n      } else {\n        _this.props.input.onBlur(updatedFiles[0]);\n      }\n    };\n\n    _this.onRemove = function (file) {\n      return function () {\n        var filteredFiles = _this.state.files.filter(function (stateFile) {\n          return !shallowEqual(stateFile, file);\n        });\n\n        _this.setState({\n          files: filteredFiles\n        }); // Use onBlur to ensure redux-form set the input as touched\n\n\n        if (_this.props.multiple) {\n          _this.props.input.onBlur(filteredFiles);\n        } else {\n          _this.props.input.onBlur(null);\n        }\n      };\n    }; // turn a browser dropped file structure into expected structure\n\n\n    _this.transformFile = function (file) {\n      var _a;\n\n      if (!(file instanceof File)) {\n        return file;\n      }\n\n      var _b = Children.only(_this.props.children).props,\n          source = _b.source,\n          title = _b.title;\n      var transformedFile = (_a = {\n        rawFile: file\n      }, _a[source] = file.preview, _a);\n\n      if (title) {\n        transformedFile[title] = file.name;\n      }\n\n      return transformedFile;\n    };\n\n    var files = props.input.value || [];\n\n    if (!Array.isArray(files)) {\n      files = [files];\n    }\n\n    _this.state = {\n      files: files.map(_this.transformFile)\n    };\n    return _this;\n  }\n\n  FileInput.prototype.componentWillReceiveProps = function (nextProps) {\n    var files = nextProps.input.value || [];\n\n    if (!Array.isArray(files)) {\n      files = [files];\n    }\n\n    this.setState({\n      files: files.map(this.transformFile)\n    });\n  };\n\n  FileInput.prototype.label = function () {\n    var _a = this.props,\n        translate = _a.translate,\n        placeholder = _a.placeholder,\n        labelMultiple = _a.labelMultiple,\n        labelSingle = _a.labelSingle;\n\n    if (placeholder) {\n      return placeholder;\n    }\n\n    if (this.props.multiple) {\n      return React.createElement(\"p\", null, translate(labelMultiple));\n    }\n\n    return React.createElement(\"p\", null, translate(labelSingle));\n  };\n\n  FileInput.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        accept = _a.accept,\n        children = _a.children,\n        _b = _a.classes,\n        classes = _b === void 0 ? {} : _b,\n        className = _a.className,\n        disableClick = _a.disableClick,\n        id = _a.id,\n        isRequired = _a.isRequired,\n        label = _a.label,\n        maxSize = _a.maxSize,\n        meta = _a.meta,\n        minSize = _a.minSize,\n        multiple = _a.multiple,\n        resource = _a.resource,\n        source = _a.source,\n        translate = _a.translate,\n        _c = _a.options,\n        options = _c === void 0 ? {} : _c,\n        rest = __rest(_a, [\"accept\", \"children\", \"classes\", \"className\", \"disableClick\", \"id\", \"isRequired\", \"label\", \"maxSize\", \"meta\", \"minSize\", \"multiple\", \"resource\", \"source\", \"translate\", \"options\"]);\n\n    return React.createElement(Labeled, __assign({\n      id: id,\n      label: label,\n      className: classnames(classes.root, className),\n      source: source,\n      resource: resource,\n      isRequired: isRequired,\n      meta: meta\n    }, sanitizeRestProps(rest)), React.createElement(\"span\", null, React.createElement(Dropzone, __assign({\n      onDrop: this.onDrop,\n      accept: accept,\n      disableClick: disableClick,\n      maxSize: maxSize,\n      minSize: minSize,\n      multiple: multiple,\n      className: classes.dropZone\n    }, options, {\n      inputProps: __assign({\n        id: id\n      }, options.inputProps)\n    }), this.label()), children && React.createElement(\"div\", {\n      className: \"previews\"\n    }, this.state.files.map(function (file, index) {\n      return React.createElement(FileInputPreview, {\n        key: index,\n        file: file,\n        onRemove: _this.onRemove(file),\n        className: classes.removeButton\n      }, cloneElement(Children.only(children), {\n        record: file,\n        className: classes.preview\n      }));\n    })), meta && meta.touched && meta.error && React.createElement(FormHelperText, null, translate(meta.error))));\n  };\n\n  FileInput.propTypes = {\n    accept: PropTypes.string,\n    children: PropTypes.element,\n    classes: PropTypes.object,\n    className: PropTypes.string,\n    disableClick: PropTypes.bool,\n    id: PropTypes.string,\n    input: PropTypes.object,\n    isRequired: PropTypes.bool,\n    label: PropTypes.string,\n    labelMultiple: PropTypes.string,\n    labelSingle: PropTypes.string,\n    maxSize: PropTypes.number,\n    minSize: PropTypes.number,\n    multiple: PropTypes.bool,\n    options: PropTypes.object,\n    resource: PropTypes.string,\n    source: PropTypes.string,\n    translate: PropTypes.func.isRequired,\n    placeholder: PropTypes.node\n  };\n  FileInput.defaultProps = {\n    labelMultiple: 'ra.input.file.upload_several',\n    labelSingle: 'ra.input.file.upload_single',\n    multiple: false,\n    onUpload: function onUpload() {},\n    translate: function translate(id) {\n      return id;\n    }\n  };\n  return FileInput;\n}(Component);\n\nexport { FileInput };\nexport default compose(addField, translate, withStyles(styles))(FileInput);","map":{"version":3,"sources":["/Users/masonkirby/Desktop/backed/backend/dashboard/node_modules/ra-data-drf/node_modules/ra-ui-materialui/esm/input/FileInput.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","React","Component","Children","cloneElement","PropTypes","shallowEqual","Dropzone","compose","withStyles","createStyles","FormHelperText","classnames","addField","translate","Labeled","FileInputPreview","sanitizeRestProps","styles","theme","dropZone","background","palette","default","cursor","padding","textAlign","color","text","hint","preview","removeButton","root","width","FileInput","_super","props","_this","onDrop","files","updatedFiles","multiple","state","concat","map","transformFile","slice","setState","input","onBlur","onRemove","file","filteredFiles","filter","stateFile","_a","File","_b","only","children","source","title","transformedFile","rawFile","name","value","isArray","componentWillReceiveProps","nextProps","label","placeholder","labelMultiple","labelSingle","createElement","render","accept","classes","className","disableClick","id","isRequired","maxSize","meta","minSize","resource","_c","options","rest","inputProps","index","key","record","touched","error","propTypes","string","element","object","bool","number","func","node","defaultProps","onUpload"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport React, { Component, Children, cloneElement } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual } from 'recompose';\nimport Dropzone from 'react-dropzone';\nimport compose from 'recompose/compose';\nimport { withStyles, createStyles } from '@material-ui/core/styles';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport classnames from 'classnames';\nimport { addField, translate } from 'ra-core';\nimport Labeled from './Labeled';\nimport FileInputPreview from './FileInputPreview';\nimport sanitizeRestProps from './sanitizeRestProps';\nvar styles = function (theme) {\n    return createStyles({\n        dropZone: {\n            background: theme.palette.background.default,\n            cursor: 'pointer',\n            padding: '1rem',\n            textAlign: 'center',\n            color: theme.palette.text.hint,\n        },\n        preview: {},\n        removeButton: {},\n        root: { width: '100%' },\n    });\n};\nvar FileInput = /** @class */ (function (_super) {\n    __extends(FileInput, _super);\n    function FileInput(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onDrop = function (files) {\n            var updatedFiles = _this.props.multiple\n                ? _this.state.files.concat(files.map(_this.transformFile)) : files.map(_this.transformFile).slice();\n            _this.setState({ files: updatedFiles });\n            if (_this.props.multiple) {\n                // Use onBlur to ensure redux-form set the input as touched\n                _this.props.input.onBlur(updatedFiles);\n            }\n            else {\n                _this.props.input.onBlur(updatedFiles[0]);\n            }\n        };\n        _this.onRemove = function (file) { return function () {\n            var filteredFiles = _this.state.files.filter(function (stateFile) { return !shallowEqual(stateFile, file); });\n            _this.setState({ files: filteredFiles });\n            // Use onBlur to ensure redux-form set the input as touched\n            if (_this.props.multiple) {\n                _this.props.input.onBlur(filteredFiles);\n            }\n            else {\n                _this.props.input.onBlur(null);\n            }\n        }; };\n        // turn a browser dropped file structure into expected structure\n        _this.transformFile = function (file) {\n            var _a;\n            if (!(file instanceof File)) {\n                return file;\n            }\n            var _b = Children.only(_this.props.children).props, source = _b.source, title = _b.title;\n            var transformedFile = (_a = {\n                    rawFile: file\n                },\n                _a[source] = file.preview,\n                _a);\n            if (title) {\n                transformedFile[title] = file.name;\n            }\n            return transformedFile;\n        };\n        var files = props.input.value || [];\n        if (!Array.isArray(files)) {\n            files = [files];\n        }\n        _this.state = {\n            files: files.map(_this.transformFile),\n        };\n        return _this;\n    }\n    FileInput.prototype.componentWillReceiveProps = function (nextProps) {\n        var files = nextProps.input.value || [];\n        if (!Array.isArray(files)) {\n            files = [files];\n        }\n        this.setState({ files: files.map(this.transformFile) });\n    };\n    FileInput.prototype.label = function () {\n        var _a = this.props, translate = _a.translate, placeholder = _a.placeholder, labelMultiple = _a.labelMultiple, labelSingle = _a.labelSingle;\n        if (placeholder) {\n            return placeholder;\n        }\n        if (this.props.multiple) {\n            return React.createElement(\"p\", null, translate(labelMultiple));\n        }\n        return React.createElement(\"p\", null, translate(labelSingle));\n    };\n    FileInput.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, accept = _a.accept, children = _a.children, _b = _a.classes, classes = _b === void 0 ? {} : _b, className = _a.className, disableClick = _a.disableClick, id = _a.id, isRequired = _a.isRequired, label = _a.label, maxSize = _a.maxSize, meta = _a.meta, minSize = _a.minSize, multiple = _a.multiple, resource = _a.resource, source = _a.source, translate = _a.translate, _c = _a.options, options = _c === void 0 ? {} : _c, rest = __rest(_a, [\"accept\", \"children\", \"classes\", \"className\", \"disableClick\", \"id\", \"isRequired\", \"label\", \"maxSize\", \"meta\", \"minSize\", \"multiple\", \"resource\", \"source\", \"translate\", \"options\"]);\n        return (React.createElement(Labeled, __assign({ id: id, label: label, className: classnames(classes.root, className), source: source, resource: resource, isRequired: isRequired, meta: meta }, sanitizeRestProps(rest)),\n            React.createElement(\"span\", null,\n                React.createElement(Dropzone, __assign({ onDrop: this.onDrop, accept: accept, disableClick: disableClick, maxSize: maxSize, minSize: minSize, multiple: multiple, className: classes.dropZone }, options, { inputProps: __assign({ id: id }, options.inputProps) }), this.label()),\n                children && (React.createElement(\"div\", { className: \"previews\" }, this.state.files.map(function (file, index) { return (React.createElement(FileInputPreview, { key: index, file: file, onRemove: _this.onRemove(file), className: classes.removeButton }, cloneElement(Children.only(children), {\n                    record: file,\n                    className: classes.preview,\n                }))); }))),\n                meta && meta.touched && meta.error && (React.createElement(FormHelperText, null, translate(meta.error))))));\n    };\n    FileInput.propTypes = {\n        accept: PropTypes.string,\n        children: PropTypes.element,\n        classes: PropTypes.object,\n        className: PropTypes.string,\n        disableClick: PropTypes.bool,\n        id: PropTypes.string,\n        input: PropTypes.object,\n        isRequired: PropTypes.bool,\n        label: PropTypes.string,\n        labelMultiple: PropTypes.string,\n        labelSingle: PropTypes.string,\n        maxSize: PropTypes.number,\n        minSize: PropTypes.number,\n        multiple: PropTypes.bool,\n        options: PropTypes.object,\n        resource: PropTypes.string,\n        source: PropTypes.string,\n        translate: PropTypes.func.isRequired,\n        placeholder: PropTypes.node,\n    };\n    FileInput.defaultProps = {\n        labelMultiple: 'ra.input.file.upload_several',\n        labelSingle: 'ra.input.file.upload_single',\n        multiple: false,\n        onUpload: function () { },\n        translate: function (id) { return id; },\n    };\n    return FileInput;\n}(Component));\nexport { FileInput };\nexport default compose(addField, translate, withStyles(styles))(FileInput);\n"]},"metadata":{},"sourceType":"module"}