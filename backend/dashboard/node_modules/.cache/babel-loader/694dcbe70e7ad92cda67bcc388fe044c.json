{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport get from 'lodash/get';\nimport { crudGetManyAccumulate as crudGetManyAccumulateAction } from '../../actions';\nimport { linkToRecord } from '../../util';\n/**\n * Fetch reference record, and delegate rendering to child component.\n *\n * The reference prop sould be the name of one of the <Resource> components\n * added as <Admin> child.\n *\n * @example\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\">\n *     <TextField source=\"name\" />\n * </ReferenceField>\n *\n * By default, includes a link to the <Edit> page of the related record\n * (`/users/:userId` in the previous example).\n *\n * Set the linkType prop to \"show\" to link to the <Show> page instead.\n *\n * @example\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" linkType=\"show\">\n *     <TextField source=\"name\" />\n * </ReferenceField>\n *\n * You can also prevent `<ReferenceField>` from adding link to children by setting\n * `linkType` to false.\n *\n * @example\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" linkType={false}>\n *     <TextField source=\"name\" />\n * </ReferenceField>\n */\n\nvar UnconnectedReferenceFieldController =\n/** @class */\nfunction (_super) {\n  __extends(UnconnectedReferenceFieldController, _super);\n\n  function UnconnectedReferenceFieldController() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  UnconnectedReferenceFieldController.prototype.componentDidMount = function () {\n    this.fetchReference(this.props);\n  };\n\n  UnconnectedReferenceFieldController.prototype.componentWillReceiveProps = function (nextProps) {\n    if (this.props.record.id !== nextProps.record.id) {\n      this.fetchReference(nextProps);\n    }\n  };\n\n  UnconnectedReferenceFieldController.prototype.fetchReference = function (props) {\n    var source = get(props.record, props.source);\n\n    if (source !== null && typeof source !== 'undefined') {\n      this.props.crudGetManyAccumulate(props.reference, [source]);\n    }\n  };\n\n  UnconnectedReferenceFieldController.prototype.render = function () {\n    var _a = this.props,\n        allowEmpty = _a.allowEmpty,\n        basePath = _a.basePath,\n        children = _a.children,\n        linkType = _a.linkType,\n        record = _a.record,\n        reference = _a.reference,\n        referenceRecord = _a.referenceRecord,\n        resource = _a.resource,\n        source = _a.source;\n    var rootPath = basePath.replace(resource, reference);\n    var resourceLinkPath = !linkType ? false : linkToRecord(rootPath, get(record, source), linkType);\n    return children({\n      isLoading: !referenceRecord && !allowEmpty,\n      referenceRecord: referenceRecord,\n      resourceLinkPath: resourceLinkPath\n    });\n  };\n\n  UnconnectedReferenceFieldController.defaultProps = {\n    allowEmpty: false,\n    linkType: 'edit',\n    referenceRecord: null,\n    record: {\n      id: ''\n    }\n  };\n  return UnconnectedReferenceFieldController;\n}(Component);\n\nexport { UnconnectedReferenceFieldController };\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    referenceRecord: state.admin.resources[props.reference] && state.admin.resources[props.reference].data[get(props.record, props.source)]\n  };\n};\n\nvar ReferenceFieldController = connect(mapStateToProps, {\n  crudGetManyAccumulate: crudGetManyAccumulateAction\n})(UnconnectedReferenceFieldController);\nexport default ReferenceFieldController;","map":{"version":3,"sources":["/Users/masonkirby/Desktop/backed/backend/dashboard/node_modules/ra-data-drf/node_modules/ra-core/esm/controller/field/ReferenceFieldController.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Component","connect","get","crudGetManyAccumulate","crudGetManyAccumulateAction","linkToRecord","UnconnectedReferenceFieldController","_super","apply","arguments","componentDidMount","fetchReference","props","componentWillReceiveProps","nextProps","record","id","source","reference","render","_a","allowEmpty","basePath","children","linkType","referenceRecord","resource","rootPath","replace","resourceLinkPath","isLoading","defaultProps","mapStateToProps","state","admin","resources","data","ReferenceFieldController"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport get from 'lodash/get';\nimport { crudGetManyAccumulate as crudGetManyAccumulateAction } from '../../actions';\nimport { linkToRecord } from '../../util';\n/**\n * Fetch reference record, and delegate rendering to child component.\n *\n * The reference prop sould be the name of one of the <Resource> components\n * added as <Admin> child.\n *\n * @example\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\">\n *     <TextField source=\"name\" />\n * </ReferenceField>\n *\n * By default, includes a link to the <Edit> page of the related record\n * (`/users/:userId` in the previous example).\n *\n * Set the linkType prop to \"show\" to link to the <Show> page instead.\n *\n * @example\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" linkType=\"show\">\n *     <TextField source=\"name\" />\n * </ReferenceField>\n *\n * You can also prevent `<ReferenceField>` from adding link to children by setting\n * `linkType` to false.\n *\n * @example\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" linkType={false}>\n *     <TextField source=\"name\" />\n * </ReferenceField>\n */\nvar UnconnectedReferenceFieldController = /** @class */ (function (_super) {\n    __extends(UnconnectedReferenceFieldController, _super);\n    function UnconnectedReferenceFieldController() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    UnconnectedReferenceFieldController.prototype.componentDidMount = function () {\n        this.fetchReference(this.props);\n    };\n    UnconnectedReferenceFieldController.prototype.componentWillReceiveProps = function (nextProps) {\n        if (this.props.record.id !== nextProps.record.id) {\n            this.fetchReference(nextProps);\n        }\n    };\n    UnconnectedReferenceFieldController.prototype.fetchReference = function (props) {\n        var source = get(props.record, props.source);\n        if (source !== null && typeof source !== 'undefined') {\n            this.props.crudGetManyAccumulate(props.reference, [source]);\n        }\n    };\n    UnconnectedReferenceFieldController.prototype.render = function () {\n        var _a = this.props, allowEmpty = _a.allowEmpty, basePath = _a.basePath, children = _a.children, linkType = _a.linkType, record = _a.record, reference = _a.reference, referenceRecord = _a.referenceRecord, resource = _a.resource, source = _a.source;\n        var rootPath = basePath.replace(resource, reference);\n        var resourceLinkPath = !linkType\n            ? false\n            : linkToRecord(rootPath, get(record, source), linkType);\n        return children({\n            isLoading: !referenceRecord && !allowEmpty,\n            referenceRecord: referenceRecord,\n            resourceLinkPath: resourceLinkPath,\n        });\n    };\n    UnconnectedReferenceFieldController.defaultProps = {\n        allowEmpty: false,\n        linkType: 'edit',\n        referenceRecord: null,\n        record: { id: '' },\n    };\n    return UnconnectedReferenceFieldController;\n}(Component));\nexport { UnconnectedReferenceFieldController };\nvar mapStateToProps = function (state, props) { return ({\n    referenceRecord: state.admin.resources[props.reference] &&\n        state.admin.resources[props.reference].data[get(props.record, props.source)],\n}); };\nvar ReferenceFieldController = connect(mapStateToProps, {\n    crudGetManyAccumulate: crudGetManyAccumulateAction,\n})(UnconnectedReferenceFieldController);\nexport default ReferenceFieldController;\n"]},"metadata":{},"sourceType":"module"}